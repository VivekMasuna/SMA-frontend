import{c as G,R as h,g as pt,r as B,a as Ae,j as s}from"./index-ChNrdEtI.js";import{W as Re}from"./WordCloudVisx-BRkTW7Kw.js";import{f as T,r as ht,a as Ct,b as mt,c as Ft,i as ee,T as Ge,p as Z,L as K,g as vt,d as He,e as yt,D as gt,C as bt,h as J,j as te,S as Bt,A as xt,k as Kt,l as ie,m as At,n as le,o as jt,u as Pt,G as Ot,q as Pe,s as wt,t as kt,v as Mt,w as je,x as Ze,E as Vt,y as Wt,z as Je,B as St,X as Be,Y as Ke,F as zt,H as qt,R as De,I as Ut,J as Ie,K as Xe,M as Gt}from"./BarChart-Duyo5usQ.js";import"./string-CFFdVFMV.js";var Ht=["points","className","baseLinePoints","connectNulls"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ue.apply(this,arguments)}function Zt(e,t){if(e==null)return{};var r=Jt(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ye(e){return en(e)||Qt(e)||Yt(e)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(e,t){if(e){if(typeof e=="string")return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}}function Qt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function en(e){if(Array.isArray(e))return Me(e)}function Me(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qe=function(t){return t&&t.x===+t.x&&t.y===+t.y},tn=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Qe(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Qe(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ye=function(t,r){var n=tn(t);r&&(n=[n.reduce(function(o,i){return[].concat(Ye(o),Ye(i))},[])]);var a=n.map(function(o){return o.reduce(function(i,c,u){return"".concat(i).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},nn=function(t,r,n){var a=ye(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ye(r.reverse(),n).slice(1))},rn=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,o=t.connectNulls,i=Zt(t,Ht);if(!r||!r.length)return null;var c=G("recharts-polygon",n);if(a&&a.length){var u=i.stroke&&i.stroke!=="none",l=nn(r,a,o);return h.createElement("g",{className:c},h.createElement("path",ue({},T(i,!0),{fill:l.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:l})),u?h.createElement("path",ue({},T(i,!0),{fill:"none",d:ye(r,o)})):null,u?h.createElement("path",ue({},T(i,!0),{fill:"none",d:ye(a,o)})):null)}var f=ye(r,o);return h.createElement("path",ue({},T(i,!0),{fill:f.slice(-1)==="Z"?i.fill:"none",className:c,d:f}))},Ce,et;function an(){if(et)return Ce;et=1;var e=ht(),t=Ct(),r=mt();function n(a,o){return a&&a.length?e(a,r(o,2),t):void 0}return Ce=n,Ce}var on=an();const sn=pt(on);var Fe,tt;function cn(){if(tt)return Fe;tt=1;var e=ht(),t=mt(),r=Ft();function n(a,o){return a&&a.length?e(a,t(o,2),r):void 0}return Fe=n,Fe}var ln=cn();const un=pt(ln);var dn=["cx","cy","angle","ticks","axisLine"],fn=["ticks","tick","angle","tickFormatter","stroke"];function fe(e){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ge.apply(this,arguments)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(n){Ee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rt(e,t){if(e==null)return{};var r=pn(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pn(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Et(n.key),n)}}function mn(e,t,r){return t&&at(e.prototype,t),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vn(e,t,r){return t=we(t),yn(e,_t()?Reflect.construct(t,r||[],we(e).constructor):t.apply(e,r))}function yn(e,t){if(t&&(fe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(e)}function gn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_t=function(){return!!e})()}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},we(e)}function bn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}function Ve(e,t){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ve(e,t)}function Ee(e,t,r){return t=Et(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){var t=xn(e,"string");return fe(t)=="symbol"?t:t+""}function xn(e,t){if(fe(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Te=function(e){function t(){return hn(this,t),vn(this,t,arguments)}return bn(t,e),mn(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,o=this.props,i=o.angle,c=o.cx,u=o.cy;return Z(c,u,a,i)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.angle,c=n.ticks,u=sn(c,function(f){return f.coordinate||0}),l=un(c,function(f){return f.coordinate||0});return{cx:a,cy:o,startAngle:i,endAngle:i,innerRadius:l.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.angle,c=n.ticks,u=n.axisLine,l=rt(n,dn),f=c.reduce(function(p,d){return[Math.min(p[0],d.coordinate),Math.max(p[1],d.coordinate)]},[1/0,-1/0]),m=Z(a,o,f[0],i),v=Z(a,o,f[1],i),b=re(re(re({},T(l,!1)),{},{fill:"none"},T(u,!1)),{},{x1:m.x,y1:m.y,x2:v.x,y2:v.y});return h.createElement("line",ge({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,a=this.props,o=a.ticks,i=a.tick,c=a.angle,u=a.tickFormatter,l=a.stroke,f=rt(a,fn),m=this.getTickTextAnchor(),v=T(f,!1),b=T(i,!1),p=o.map(function(d,g){var x=n.getTickValueCoord(d),j=re(re(re(re({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(x.x,", ").concat(x.y,")")},v),{},{stroke:"none",fill:l},b),{},{index:g},x),{},{payload:d});return h.createElement(K,ge({className:G("recharts-polar-radius-axis-tick",vt(i)),key:"tick-".concat(d.coordinate)},He(n.props,d,g)),t.renderTickItem(i,j,u?u(d.value,g):d.value))});return h.createElement(K,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,o=n.axisLine,i=n.tick;return!a||!a.length?null:h.createElement(K,{className:G("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),yt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,o){var i;return h.isValidElement(n)?i=h.cloneElement(n,a):ee(n)?i=n(a):i=h.createElement(Ge,ge({},a,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(B.PureComponent);Ee(Te,"displayName","PolarRadiusAxis");Ee(Te,"axisType","radiusAxis");Ee(Te,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pe(e){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(e)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(this,arguments)}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?it(Object(r),!0).forEach(function(n){Ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nt(n.key),n)}}function jn(e,t,r){return t&&ot(e.prototype,t),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pn(e,t,r){return t=ke(t),On(e,Tt()?Reflect.construct(t,r||[],ke(e).constructor):t.apply(e,r))}function On(e,t){if(t&&(pe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wn(e)}function wn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!e})()}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ke(e)}function kn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},We(e,t)}function Ne(e,t,r){return t=Nt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e){var t=Sn(e,"string");return pe(t)=="symbol"?t:t+""}function Sn(e,t){if(pe(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _n=Math.PI/180,En=1e-5,$e=function(e){function t(){return An(this,t),Pn(this,t,arguments)}return kn(t,e),jn(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,o=a.cx,i=a.cy,c=a.radius,u=a.orientation,l=a.tickSize,f=l||8,m=Z(o,i,c,n.coordinate),v=Z(o,i,c+(u==="inner"?-1:1)*f,n.coordinate);return{x1:m.x,y1:m.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,o=Math.cos(-n.coordinate*_n),i;return o>En?i=a==="outer"?"start":"end":o<-1e-5?i=a==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.radius,c=n.axisLine,u=n.axisLineType,l=ae(ae({},T(this.props,!1)),{},{fill:"none"},T(c,!1));if(u==="circle")return h.createElement(gt,oe({className:"recharts-polar-angle-axis-line"},l,{cx:a,cy:o,r:i}));var f=this.props.ticks,m=f.map(function(v){return Z(a,o,i,v.coordinate)});return h.createElement(rn,oe({className:"recharts-polar-angle-axis-line"},l,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,o=a.ticks,i=a.tick,c=a.tickLine,u=a.tickFormatter,l=a.stroke,f=T(this.props,!1),m=T(i,!1),v=ae(ae({},f),{},{fill:"none"},T(c,!1)),b=o.map(function(p,d){var g=n.getTickLineCoord(p),x=n.getTickTextAnchor(p),j=ae(ae(ae({textAnchor:x},f),{},{stroke:"none",fill:l},m),{},{index:d,payload:p,x:g.x2,y:g.y2});return h.createElement(K,oe({className:G("recharts-polar-angle-axis-tick",vt(i)),key:"tick-".concat(p.coordinate)},He(n.props,p,d)),c&&h.createElement("line",oe({className:"recharts-polar-angle-axis-tick-line"},v,g)),i&&t.renderTickItem(i,j,u?u(p.value,d):p.value))});return h.createElement(K,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,a=n.ticks,o=n.radius,i=n.axisLine;return o<=0||!a||!a.length?null:h.createElement(K,{className:G("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,o){var i;return h.isValidElement(n)?i=h.cloneElement(n,a):ee(n)?i=n(a):i=h.createElement(Ge,oe({},a,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(B.PureComponent);Ne($e,"displayName","PolarAngleAxis");Ne($e,"axisType","angleAxis");Ne($e,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Oe;function he(e){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(e)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?st(Object(r),!0).forEach(function(n){q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lt(n.key),n)}}function Nn(e,t,r){return t&&ct(e.prototype,t),r&&ct(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $n(e,t,r){return t=Se(t),Ln(e,$t()?Reflect.construct(t,r||[],Se(e).constructor):t.apply(e,r))}function Ln(e,t){if(t&&(he(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rn(e)}function Rn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Se(e)}function Dn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ze(e,t)}function q(e,t,r){return t=Lt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e){var t=In(e,"string");return he(t)=="symbol"?t:t+""}function In(e,t){if(he(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(he(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var X=function(e){function t(r){var n;return Tn(this,t),n=$n(this,t,[r]),q(n,"pieRef",null),q(n,"sectorRefs",[]),q(n,"id",Pt("recharts-pie-")),q(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ee(a)&&a()}),q(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ee(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return Dn(t,e),Nn(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,c=o.labelLine,u=o.dataKey,l=o.valueKey,f=T(this.props,!1),m=T(i,!1),v=T(c,!1),b=i&&i.offsetRadius||20,p=n.map(function(d,g){var x=(d.startAngle+d.endAngle)/2,j=Z(d.cx,d.cy,d.outerRadius+b,x),N=P(P(P(P({},f),d),{},{stroke:"none"},m),{},{index:g,textAnchor:t.getTextAnchor(j.x,d.cx)},j),D=P(P(P(P({},f),d),{},{fill:"none",stroke:d.fill},v),{},{index:g,points:[Z(d.cx,d.cy,d.outerRadius,x),j]}),w=u;return J(u)&&J(l)?w="value":J(u)&&(w=l),h.createElement(K,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(g)},c&&t.renderLabelLineItem(c,D,"line"),t.renderLabelItem(i,N,te(d,w)))});return h.createElement(K,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(n){var a=this,o=this.props,i=o.activeShape,c=o.blendStroke,u=o.inactiveShape;return n.map(function(l,f){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&n.length!==1)return null;var m=a.isActiveIndex(f),v=u&&a.hasActiveIndex()?u:null,b=m?i:v,p=P(P({},l),{},{stroke:c?l.fill:l.stroke,tabIndex:-1});return h.createElement(K,de({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},He(a.props,l,f),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(f)}),h.createElement(Bt,de({option:b,isActive:m,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,o=a.sectors,i=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,l=a.animationEasing,f=a.animationId,m=this.state,v=m.prevSectors,b=m.prevIsAnimationActive;return h.createElement(xt,{begin:c,duration:u,isActive:i,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(b),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var d=p.t,g=[],x=o&&o[0],j=x.startAngle;return o.forEach(function(N,D){var w=v&&v[D],L=D>0?Kt(N,"paddingAngle",0):0;if(w){var I=ie(w.endAngle-w.startAngle,N.endAngle-N.startAngle),k=P(P({},N),{},{startAngle:j+L,endAngle:j+I(d)+L});g.push(k),j=k.endAngle}else{var C=N.endAngle,$=N.startAngle,W=ie(0,C-$),S=W(d),F=P(P({},N),{},{startAngle:j+L,endAngle:j+S+L});g.push(F),j=F.endAngle}}),h.createElement(K,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[i].focus(),a.setState({sectorToFocus:i});break}case"ArrowRight":{var c=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[c].focus(),a.setState({sectorToFocus:c});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,o=n.isAnimationActive,i=this.state.prevSectors;return o&&a&&a.length&&(!i||!At(i,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,o=a.hide,i=a.sectors,c=a.className,u=a.label,l=a.cx,f=a.cy,m=a.innerRadius,v=a.outerRadius,b=a.isAnimationActive,p=this.state.isAnimationFinished;if(o||!i||!i.length||!le(l)||!le(f)||!le(m)||!le(v))return null;var d=G("recharts-pie",c);return h.createElement(K,{tabIndex:this.props.rootTabIndex,className:d,ref:function(x){n.pieRef=x}},this.renderSectors(),u&&this.renderLabels(i),yt.renderCallByParent(this.props,null,!1),(!b||p)&&jt.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,o){if(h.isValidElement(n))return h.cloneElement(n,a);if(ee(n))return n(a);var i=G("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return h.createElement(bt,de({},a,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(n,a,o){if(h.isValidElement(n))return h.cloneElement(n,a);var i=o;if(ee(n)&&(i=n(a),h.isValidElement(i)))return i;var c=G("recharts-pie-label-text",typeof n!="boolean"&&!ee(n)?n.className:"");return h.createElement(Ge,de({},a,{alignmentBaseline:"middle",className:c}),i)}}])}(B.PureComponent);Oe=X;q(X,"displayName","Pie");q(X,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ot.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});q(X,"parseDeltaAngle",function(e,t){var r=Pe(t-e),n=Math.min(Math.abs(t-e),360);return r*n});q(X,"getRealPieData",function(e){var t=e.data,r=e.children,n=T(e,!1),a=wt(r,kt);return t&&t.length?t.map(function(o,i){return P(P(P({payload:o},n),o),a&&a[i]&&a[i].props)}):a&&a.length?a.map(function(o){return P(P({},n),o.props)}):[]});q(X,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,o=t.height,i=Mt(a,o),c=n+je(e.cx,a,a/2),u=r+je(e.cy,o,o/2),l=je(e.innerRadius,i,0),f=je(e.outerRadius,i,i*.8),m=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:c,cy:u,innerRadius:l,outerRadius:f,maxRadius:m}});q(X,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?P(P({},t.type.defaultProps),t.props):t.props,a=Oe.getRealPieData(n);if(!a||!a.length)return null;var o=n.cornerRadius,i=n.startAngle,c=n.endAngle,u=n.paddingAngle,l=n.dataKey,f=n.nameKey,m=n.valueKey,v=n.tooltipType,b=Math.abs(n.minAngle),p=Oe.parseCoordinateOfPie(n,r),d=Oe.parseDeltaAngle(i,c),g=Math.abs(d),x=l;J(l)&&J(m)?(Ze(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):J(l)&&(Ze(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=m);var j=a.filter(function(k){return te(k,x,0)!==0}).length,N=(g>=360?j:j-1)*u,D=g-j*b-N,w=a.reduce(function(k,C){var $=te(C,x,0);return k+(le($)?$:0)},0),L;if(w>0){var I;L=a.map(function(k,C){var $=te(k,x,0),W=te(k,f,C),S=(le($)?$:0)/w,F;C?F=I.endAngle+Pe(d)*u*($!==0?1:0):F=i;var y=F+Pe(d)*(($!==0?b:0)+S*D),A=(F+y)/2,_=(p.innerRadius+p.outerRadius)/2,z=[{name:W,value:$,payload:k,dataKey:x,type:v}],M=Z(p.cx,p.cy,_,A);return I=P(P(P({percent:S,cornerRadius:o,name:W,tooltipPayload:z,midAngle:A,middleRadius:_,tooltipPosition:M},k),p),{},{value:te(k,x),startAngle:F,endAngle:y,payload:k,paddingAngle:Pe(d)*u}),I})}return P(P({},p),{},{sectors:L,data:a})});var Cn=["type","layout","connectNulls","ref"],Fn=["key"];function me(e){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(e)}function lt(e,t){if(e==null)return{};var r=Bn(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bn(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(this,arguments)}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ut(Object(r),!0).forEach(function(n){U(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ce(e){return Wn(e)||Vn(e)||Mn(e)||Kn()}function Kn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mn(e,t){if(e){if(typeof e=="string")return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}}function Vn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wn(e){if(Array.isArray(e))return qe(e)}function qe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dt(n.key),n)}}function qn(e,t,r){return t&&dt(e.prototype,t),r&&dt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Un(e,t,r){return t=_e(t),Gn(e,Rt()?Reflect.construct(t,r||[],_e(e).constructor):t.apply(e,r))}function Gn(e,t){if(t&&(me(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}function Hn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rt=function(){return!!e})()}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_e(e)}function Zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ue(e,t)}function U(e,t,r){return t=Dt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e){var t=Jn(e,"string");return me(t)=="symbol"?t:t+""}function Jn(e,t){if(me(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(me(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xe=function(e){function t(){var r;zn(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=Un(this,t,[].concat(a)),U(r,"state",{isAnimationFinished:!0,totalLength:0}),U(r,"generateSimpleStrokeDasharray",function(i,c){return"".concat(c,"px ").concat(i-c,"px")}),U(r,"getStrokeDasharray",function(i,c,u){var l=u.reduce(function(x,j){return x+j});if(!l)return r.generateSimpleStrokeDasharray(c,i);for(var f=Math.floor(i/l),m=i%l,v=c-i,b=[],p=0,d=0;p<u.length;d+=u[p],++p)if(d+u[p]>m){b=[].concat(ce(u.slice(0,p)),[m-d]);break}var g=b.length%2===0?[0,v]:[v];return[].concat(ce(t.repeat(u,f)),ce(b),g).map(function(x){return"".concat(x,"px")}).join(", ")}),U(r,"id",Pt("recharts-line-")),U(r,"pathRef",function(i){r.mainCurve=i}),U(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),U(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Zn(t,e),qn(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,c=o.xAxis,u=o.yAxis,l=o.layout,f=o.children,m=wt(f,Vt);if(!m)return null;var v=function(d,g){return{x:d.x,y:d.y,value:d.value,errorVal:te(d.payload,g)}},b={clipPath:n?"url(#clipPath-".concat(a,")"):null};return h.createElement(K,b,m.map(function(p){return h.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:i,xAxis:c,yAxis:u,layout:l,dataPointFormatter:v})}))}},{key:"renderDots",value:function(n,a,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var c=this.props,u=c.dot,l=c.points,f=c.dataKey,m=T(this.props,!1),v=T(u,!0),b=l.map(function(d,g){var x=V(V(V({key:"dot-".concat(g),r:3},m),v),{},{index:g,cx:d.x,cy:d.y,value:d.value,dataKey:f,payload:d.payload,points:l});return t.renderDotItem(u,x)}),p={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return h.createElement(K,be({className:"recharts-line-dots",key:"dots"},p),b)}},{key:"renderCurveStatically",value:function(n,a,o,i){var c=this.props,u=c.type,l=c.layout,f=c.connectNulls;c.ref;var m=lt(c,Cn),v=V(V(V({},T(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(o,")"):null,points:n},i),{},{type:u,layout:l,connectNulls:f});return h.createElement(bt,be({},v,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var o=this,i=this.props,c=i.points,u=i.strokeDasharray,l=i.isAnimationActive,f=i.animationBegin,m=i.animationDuration,v=i.animationEasing,b=i.animationId,p=i.animateNewValues,d=i.width,g=i.height,x=this.state,j=x.prevPoints,N=x.totalLength;return h.createElement(xt,{begin:f,duration:m,isActive:l,easing:v,from:{t:0},to:{t:1},key:"line-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(D){var w=D.t;if(j){var L=j.length/c.length,I=c.map(function(S,F){var y=Math.floor(F*L);if(j[y]){var A=j[y],_=ie(A.x,S.x),z=ie(A.y,S.y);return V(V({},S),{},{x:_(w),y:z(w)})}if(p){var M=ie(d*2,S.x),Y=ie(g/2,S.y);return V(V({},S),{},{x:M(w),y:Y(w)})}return V(V({},S),{},{x:S.x,y:S.y})});return o.renderCurveStatically(I,n,a)}var k=ie(0,N),C=k(w),$;if(u){var W="".concat(u).split(/[,\s]+/gim).map(function(S){return parseFloat(S)});$=o.getStrokeDasharray(C,N,W)}else $=o.generateSimpleStrokeDasharray(N,C);return o.renderCurveStatically(c,n,a,{strokeDasharray:$})})}},{key:"renderCurve",value:function(n,a){var o=this.props,i=o.points,c=o.isAnimationActive,u=this.state,l=u.prevPoints,f=u.totalLength;return c&&i&&i.length&&(!l&&f>0||!At(l,i))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(i,n,a)}},{key:"render",value:function(){var n,a=this.props,o=a.hide,i=a.dot,c=a.points,u=a.className,l=a.xAxis,f=a.yAxis,m=a.top,v=a.left,b=a.width,p=a.height,d=a.isAnimationActive,g=a.id;if(o||!c||!c.length)return null;var x=this.state.isAnimationFinished,j=c.length===1,N=G("recharts-line",u),D=l&&l.allowDataOverflow,w=f&&f.allowDataOverflow,L=D||w,I=J(g)?this.id:g,k=(n=T(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},C=k.r,$=C===void 0?3:C,W=k.strokeWidth,S=W===void 0?2:W,F=Wt(i)?i:{},y=F.clipDot,A=y===void 0?!0:y,_=$*2+S;return h.createElement(K,{className:N},D||w?h.createElement("defs",null,h.createElement("clipPath",{id:"clipPath-".concat(I)},h.createElement("rect",{x:D?v:v-b/2,y:w?m:m-p/2,width:D?b:b*2,height:w?p:p*2})),!A&&h.createElement("clipPath",{id:"clipPath-dots-".concat(I)},h.createElement("rect",{x:v-_/2,y:m-_/2,width:b+_,height:p+_}))):null,!j&&this.renderCurve(L,I),this.renderErrorBar(L,I),(j||i)&&this.renderDots(L,A,I),(!d||x)&&jt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var o=n.length%2!==0?[].concat(ce(n),[0]):n,i=[],c=0;c<a;++c)i=[].concat(ce(i),ce(o));return i}},{key:"renderDotItem",value:function(n,a){var o;if(h.isValidElement(n))o=h.cloneElement(n,a);else if(ee(n))o=n(a);else{var i=a.key,c=lt(a,Fn),u=G("recharts-line-dot",typeof n!="boolean"?n.className:"");o=h.createElement(gt,be({key:i},c,{className:u}))}return o}}])}(B.PureComponent);U(xe,"displayName","Line");U(xe,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ot.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});U(xe,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,c=e.bandSize,u=e.displayedData,l=e.offset,f=t.layout,m=u.map(function(v,b){var p=te(v,i);return f==="horizontal"?{x:Je({axis:r,ticks:a,bandSize:c,entry:v,index:b}),y:J(p)?null:n.scale(p),value:p,payload:v}:{x:J(p)?null:r.scale(p),y:Je({axis:n,ticks:o,bandSize:c,entry:v,index:b}),value:p,payload:v}});return V({points:m,layout:f},l)});var Xn=St({chartName:"LineChart",GraphicalChild:xe,axisComponents:[{axisType:"xAxis",AxisComp:Be},{axisType:"yAxis",AxisComp:Ke}],formatAxisMap:zt}),Yn=St({chartName:"PieChart",GraphicalChild:X,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:$e},{axisType:"radiusAxis",AxisComp:Te}],formatAxisMap:qt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Qn=["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","i"],er=(e,t=Qn)=>{if(!Array.isArray(e)||!Array.isArray(t))throw new Error("expected Arrays try: removeStopwords(Array[, Array])");return e.filter(r=>!t.includes(r.toLowerCase()))},ft=["#00C49F","#FFBB28","#FF5E5E"],ir=()=>{var C,$,W,S,F;const[e,t]=B.useState("file"),[r,n]=B.useState(null),[a,o]=B.useState(""),[i,c]=B.useState(null),[u,l]=B.useState(!1),[f,m]=B.useState([]),[v,b]=B.useState([]),[p,d]=B.useState([]),[g,x]=B.useState(""),j=()=>e==="file"?!!r:e==="text"?a.trim().length>0:e==="dataset"?!!g:!1;B.useEffect(()=>{Ae.get("https://sma-vlab-backend.kjsieit.com/api/experiments/default-datasets").then(y=>d(y.data.datasets)).catch(y=>console.error("Failed to fetch datasets:",y))},[]);const N=y=>{const A=y.target.files[0];if(A){if(!A.name.endsWith(".csv")){alert("Only CSV files are supported.");return}if(A.size>2097152){alert("File size should be less than 2 MB.");return}n(A)}},D=y=>o(y.target.value),w=async()=>{var y,A,_,z,M,Y,ne,se;if(l(!0),c(null),b([]),e==="file"){if(!r){alert("Please upload a CSV file."),l(!1);return}const R=new FormData;R.append("file",r);try{const O=await Ae.post("https://sma-vlab-backend.kjsieit.com/api/experiments/sentiment-analysis",R),E=typeof O.data.output=="string"?JSON.parse(O.data.output.replace(/'/g,'"')):O.data.output;c(E),k(E.cleaned_texts,E.sentiments);const H=E.cleaned_texts||[],Q=E.sentiments||[],ve=H.map((Le,It)=>({text:Le,sentiment:Q[It]||"unknown"}));b(ve)}catch(O){console.error("Error during file analysis:",O);const E=((A=(y=O.response)==null?void 0:y.data)==null?void 0:A.error)||((z=(_=O.response)==null?void 0:_.data)==null?void 0:z.details)||O.message||"Something went wrong.";alert(`File Analysis Failed: ${E}`)}}else if(e==="dataset"){if(!g){alert("Please select a dataset."),l(!1);return}try{const R=await Ae.post("https://sma-vlab-backend.kjsieit.com/api/experiments/sentiment-analysis",{datasetName:g}),O=typeof R.data.output=="string"?JSON.parse(R.data.output.replace(/'/g,'"')):R.data.output;c(O),k(O.cleaned_texts,O.sentiments);const E=O.cleaned_texts.map((H,Q)=>({text:H,sentiment:O.sentiments[Q]||"unknown"}));b(E)}catch(R){console.error("Error analyzing dataset:",R)}l(!1);return}else{if(!a){o(`This product is amazing! | positive
The service was terrible. | negative
It was okay, nothing special. | neutral`),l(!1);return}const O=a.split(`
`).filter(Boolean).map(E=>{const[H,Q=""]=E.split("|").map(Le=>Le.trim()),ve=["positive","negative","neutral"].includes(Q)?Q:null;return{text:H,label:ve}});if(O.length===0||!O.every(E=>E.text)){alert("Please enter at least one valid text entry."),l(!1);return}try{console.log("Sending payload:",O);const E=await Ae.post("https://sma-vlab-backend.kjsieit.com/api/experiments/sentiment-analysis/text-multi",{data:O});c(E.data.output);const H=O.map(ve=>ve.text),Q=E.data.output.sentiments||[];k(H,Q)}catch(E){console.error("Error during text analysis:",E);const H=((Y=(M=E.response)==null?void 0:M.data)==null?void 0:Y.details)||((se=(ne=E.response)==null?void 0:ne.data)==null?void 0:se.error)||E.message;alert(`Error analyzing text: ${H}`)}}l(!1)},L=i!=null&&i.sentiments?["positive","neutral","negative"].map(y=>({name:y,count:i.sentiments.filter(A=>A===y).length})):[],I=i!=null&&i.sentiments?i.sentiments.map((y,A)=>({index:A+1,sentiment:y==="positive"?1:y==="neutral"?0:-1})):[],k=(y,A)=>{const _={positive:[],neutral:[],negative:[]};y.forEach((M,Y)=>{const ne=A[Y];_[ne]&&_[ne].push(M)});const z=M=>{const Y=M.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/),ne=er(Y),se={};return ne.forEach(R=>{se[R]=(se[R]||0)+1}),Object.entries(se).sort((R,O)=>O[1]-R[1]).slice(0,100).map(([R,O])=>({text:R,value:O}))};m({positive:z(_.positive),neutral:z(_.neutral),negative:z(_.negative)})};return s.jsxs("div",{className:"simulation3-container",children:[s.jsx("h2",{className:"heading",children:"🧪 Sentiment Analysis"}),s.jsxs("div",{className:"input-toggle",children:[s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"inputType",value:"file",checked:e==="file",onChange:()=>t("file")}),"Upload CSV File"]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"inputType",value:"text",checked:e==="text",onChange:()=>t("text")}),"Enter Text Manually"]}),s.jsxs("label",{children:[s.jsx("input",{type:"radio",name:"inputType",value:"dataset",checked:e==="dataset",onChange:()=>t("dataset")}),"Use Default Dataset"]})]}),e==="dataset"&&s.jsxs("select",{value:g,onChange:y=>x(y.target.value),className:"dataset-dropdown",children:[s.jsx("option",{value:"",children:"-- Select a dataset --"}),p.map((y,A)=>s.jsx("option",{value:y,children:y},A))]}),e==="file"&&s.jsxs("div",{className:"file-upload-section",children:[s.jsxs("p",{className:"file-info-text",children:[s.jsx("strong",{children:"Note:"})," The uploaded CSV must contain a ",s.jsx("code",{children:'"text"'})," column. A ",s.jsx("code",{children:'"label"'})," column is optional. Column names are ",s.jsx("strong",{children:"case-sensitive"}),"."]}),s.jsx("input",{type:"file",accept:".csv",onChange:N,className:"file-input"})]}),e==="text"&&s.jsx("textarea",{rows:"6",cols:"80",placeholder:'Enter one sentence per line. Optionally add label after "|" (e.g., "Great! | positive")',value:a,onChange:D,className:"text-input"}),s.jsx("button",{onClick:w,disabled:u||!j(),className:"analyze-button",children:u?"Analyzing...":"Analyze"}),i&&s.jsxs("div",{className:"result-section",children:[i.metrics&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"subheading",children:"📊 Evaluation Metrics:"}),s.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[s.jsxs("li",{children:["Accuracy: ",(C=i.metrics.accuracy)==null?void 0:C.toFixed(2)]}),s.jsxs("li",{children:["Precision: ",($=i.metrics.precision)==null?void 0:$.toFixed(2)]}),s.jsxs("li",{children:["Recall: ",(W=i.metrics.recall)==null?void 0:W.toFixed(2)]}),s.jsxs("li",{children:["F1 Score: ",(S=i.metrics.f1)==null?void 0:S.toFixed(2)]})]})]}),((F=i.metrics)==null?void 0:F.confusion_matrix)&&s.jsxs("div",{className:"confusion-matrix-section",children:[s.jsx("h3",{className:"subheading",children:"📊 Confusion Matrix"}),s.jsx("div",{className:"table-wrapper",children:s.jsxs("table",{className:"confusion-matrix-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Actual \\ Predicted"}),s.jsx("th",{children:"Positive"}),s.jsx("th",{children:"Neutral"}),s.jsx("th",{children:"Negative"})]})}),s.jsx("tbody",{children:["positive","neutral","negative"].map((y,A)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx("strong",{children:y})}),["positive","neutral","negative"].map((_,z)=>{var M;return s.jsx("td",{children:((M=i.metrics.confusion_matrix[y])==null?void 0:M[_])??0},z)})]},A))})]})})]}),s.jsxs("div",{className:"explanation-metrics",children:[s.jsx("h3",{className:"subheading",children:"📘 How Metrics Are Calculated"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Accuracy:"})," (Correct predictions) / (Total predictions)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Precision:"})," TP / (TP + FP) for each class, then averaged"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Recall:"})," TP / (TP + FN) for each class, then averaged"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"F1 Score:"})," 2 * (Precision * Recall) / (Precision + Recall)"]})]})]}),(e==="text"||v.length>0)&&s.jsxs("div",{className:"text-sentiments",children:[s.jsx("h3",{className:"subheading",children:"📋 Prediction Table"}),s.jsx("div",{className:"table-wrapper",children:s.jsxs("table",{className:"sentiment-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Text"}),s.jsx("th",{children:"Predicted Sentiment"})]})}),s.jsx("tbody",{children:(e==="text"?a.split(`
`).filter(Boolean).map((y,A)=>({text:y.split("|")[0].trim(),sentiment:i.sentiments[A]})):v).map((y,A)=>s.jsxs("tr",{children:[s.jsx("td",{children:y.text}),s.jsx("td",{className:`sentiment-${y.sentiment}`,children:y.sentiment})]},A))})]})})]}),s.jsxs("div",{className:"chart-section",children:[s.jsx("h3",{className:"subheading",children:"📈 Sentiment Bar Chart"}),s.jsx(De,{width:"100%",height:300,children:s.jsxs(Ut,{data:L,children:[s.jsx(Be,{dataKey:"name"}),s.jsx(Ke,{}),s.jsx(Ie,{}),s.jsx(Xe,{}),s.jsx(Gt,{dataKey:"count",fill:"#8884d8"})]})})]}),s.jsxs("div",{className:"chart-section",children:[s.jsx("h3",{className:"subheading",children:"🧁 Sentiment Proportion (Pie)"}),s.jsx(De,{width:"100%",height:300,children:s.jsxs(Yn,{children:[s.jsx(X,{data:L,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:L.map((y,A)=>s.jsx(kt,{fill:ft[A%ft.length]},A))}),s.jsx(Ie,{})]})})]}),s.jsxs("div",{className:"chart-section",children:[s.jsx("h3",{className:"subheading",children:"📉 Sentiment Trend (Line)"}),s.jsx(De,{width:"100%",height:300,children:s.jsxs(Xn,{data:I.slice(0,1e3),margin:{top:10,right:30,left:20,bottom:10},children:[s.jsx(Be,{dataKey:"index",hide:!0}),s.jsx(Ke,{domain:[-1,1],ticks:[-1,0,1]}),s.jsx(Ie,{}),s.jsx(Xe,{}),s.jsx(xe,{type:"monotone",dataKey:"sentiment",stroke:"#82ca9d",dot:!1,strokeWidth:2})]})})]}),f&&s.jsxs("div",{className:"chart-section wordcloud-section",children:[s.jsx("h3",{className:"subheading",children:"☁️ Word Clouds by Sentiment"}),s.jsxs("div",{className:"wordcloud-grid",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"😊 Positive"}),s.jsx(Re,{words:f.positive})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"😐 Neutral"}),s.jsx(Re,{words:f.neutral})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"😠 Negative"}),s.jsx(Re,{words:f.negative})]})]})]}),i.output_csv&&s.jsxs("div",{className:"csv-section",children:[s.jsx("h3",{className:"subheading",children:"📁 Output CSV:"}),s.jsx("a",{href:`https://sma-vlab-backend.kjsieit.com/${i.output_csv}`,download:!0,className:"csv-download",children:"Download Result CSV"})]})]})]})};export{ir as default};
